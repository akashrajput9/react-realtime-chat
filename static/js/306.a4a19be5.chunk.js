"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[306],{2386:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(2982),i=t(6015),o=t(4162),s=t(2791),a=t(4420),c=t(4741),l=t(7612),u=t(8770),d=(0,l.io)(u.mi,{autoConnect:!0}),x=t(5623),p=t(159),h=t(184),f=function(e){var n=e.menu,t=(0,a.v9)((function(e){return e.messages})).messages,l=(0,a.v9)((function(e){return e.auth})).user;(0,s.useEffect)((function(){return d.on("receive_message",(function(e){console.log("Message received from server:",e.data.conversation_id,t.conversation_element.id,e.data.user_id,l.id),e.data.conversation_id===t.conversation_element.id&&e.data.user_id!=l.id&&(0,x.WI)((0,p.Hz)(e.data))})),function(){d.off("receive_message")}}),[]);var u=(0,s.useRef)(null);return(0,s.useEffect)((function(){u.current&&u.current.scrollIntoView({behavior:"smooth"})}),[t]),(0,h.jsxs)(i.Z,{p:3,children:[(0,h.jsx)(o.Z,{spacing:3,children:(0,r.Z)(null===t||void 0===t?void 0:t.data).reverse().map((function(e,t){return"text"===e.type?(0,h.jsx)(c.w8,{el:e,menu:n},t):(0,h.jsx)(h.Fragment,{})}))}),(0,h.jsx)("div",{ref:u})]})}},4741:function(e,n,t){t.d(n,{RL:function(){return Z},V5:function(){return v},w8:function(){return b}});var r=t(885),i=t(4162),o=t(6015),s=t(4565),a=t(3811),c=t(6283),l=t(5452),u=t(4020),d=t(4142),x=t(6526),p=t(7501),h=t(7863),f=t(2791),g=t(2693),m=t(4420),j=t(184),Z=function(e){var n=e.el,t=e.menu,r=(0,d.Z)();return(0,j.jsxs)(i.Z,{direction:"row",justifyContent:n.incoming?"start":"end",children:[(0,j.jsx)(o.Z,{p:1.5,sx:{backgroundColor:n.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,j.jsxs)(i.Z,{spacing:2,children:[(0,j.jsxs)(i.Z,{p:2,spacing:3,direction:"row",alignItems:"center",sx:{backgroundColor:r.palette.background.paper,borderRadius:1},children:[(0,j.jsx)(x.Z,{size:48}),(0,j.jsx)(s.Z,{variant:"caption",children:"Abstract.png"}),(0,j.jsx)(a.Z,{children:(0,j.jsx)(p.Z,{})})]}),(0,j.jsx)(s.Z,{variant:"body2",sx:{color:n.incoming?r.palette.text:"#fff"},children:n.message})]})}),t&&(0,j.jsx)(w,{})]})},v=function(e){var n=e.el,t=e.menu,r=(0,d.Z)();return(0,j.jsxs)(i.Z,{direction:"row",justifyContent:n.incoming?"start":"end",children:[(0,j.jsx)(o.Z,{p:1.5,sx:{backgroundColor:n.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,j.jsx)(i.Z,{spacing:2,children:(0,j.jsxs)(i.Z,{p:2,spacing:3,alignItems:"start",sx:{backgroundColor:r.palette.background.paper,borderRadius:1},children:[(0,j.jsx)("img",{src:n.preview,alt:n.message,style:{maxHeight:210,borderRadius:"10px"}}),(0,j.jsxs)(i.Z,{spacing:2,children:[(0,j.jsx)(s.Z,{variant:"subtitle2",children:"Creating Chat App"}),(0,j.jsx)(s.Z,{variant:"subtitle2",sx:{color:r.palette.primary.main},component:c.Z,to:"//https://www.youtube.com",children:"www.youtube.com"})]}),(0,j.jsx)(s.Z,{variant:"body2",color:n.incoming?r.palette.text:"#fff",children:n.message})]})})}),t&&(0,j.jsx)(w,{})]})},b=function(e){var n=e.el,t=e.menu,r=(0,d.Z)(),a=(0,m.v9)((function(e){return e.auth})).user.id!==n.user_id;return(0,j.jsxs)(i.Z,{direction:"row",justifyContent:a?"start":"end",children:[(0,j.jsx)(o.Z,{p:1.5,sx:{backgroundColor:a?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,j.jsx)(s.Z,{variant:"body2",color:a?r.palette.text:"#fff",children:n.content})}),t&&(0,j.jsx)(w,{})]})},w=function(){var e=f.useState(null),n=(0,r.Z)(e,2),t=n[0],o=n[1],s=Boolean(t),a=function(e){o(e.currentTarget)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.Z,{id:"basic-button","aria-controls":s?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:a,size:20}),(0,j.jsx)(l.Z,{id:"basic-menu",anchorEl:t,open:s,onClose:function(){o(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:(0,j.jsx)(i.Z,{spacing:1,px:1,children:g.GF.map((function(e,n){return(0,j.jsx)(u.Z,{onClick:a,children:e.title},n)}))})})]})}},9306:function(e,n,t){t.d(n,{Z:function(){return L}});var r=t(4162),i=t(6015),o=t(2791),s=t(4142),a=t(3423),c=t(4565),l=t(3811),u=t(1872),d=t(703),x=t(9865),p=t(155),h=t(5670),f=t(6026),g=t(4420),m=(t(1317),t(184));var j=function(){var e,n,t=(0,g.I0)(),o=(0,s.Z)(),j=(0,g.v9)((function(e){return e.messages})).messages,Z=null===j||void 0===j?void 0:j.conversation_element;if(function(e){return 0===Object.keys(e).length&&e.constructor===Object}(Z))return console.log(Z,"ceee"),(0,m.jsx)(m.Fragment,{});var v=function(e){return(0,m.jsx)(a.Z,{alt:e.name,src:p.We.image.avatar()})};return(0,m.jsx)(i.Z,{p:2,sx:{width:"100%",backgroundColor:"light"===o.palette.mode?"#F8FAFF":o.palette.background.paper,boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:(0,m.jsxs)(r.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",sx:{width:"100%",height:"100%"},children:[(0,m.jsxs)(r.Z,{onClick:function(){t((0,f.Xk)())},direction:"row",spacing:2,children:[(0,m.jsx)(i.Z,{children:Z.is_online?(0,m.jsx)(h.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,m.jsx)(v,{ce:Z})}):(0,m.jsx)(v,{ce:Z})}),(0,m.jsxs)(r.Z,{spacing:.2,children:[(0,m.jsx)(c.Z,{variant:"subtitle2",children:Z.is_group?Z.name:(null===Z||void 0===Z||null===(e=Z.users)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.name)||""}),(0,m.jsx)(c.Z,{variant:"caption",children:Z.is_online?"Online":"Offline"})]})]}),(0,m.jsxs)(r.Z,{direction:"row",alignItems:"center",spacing:3,children:[(0,m.jsx)(l.Z,{children:(0,m.jsx)(d.Z,{})}),(0,m.jsx)(u.Z,{orientation:"vertical",flexItem:!0}),(0,m.jsx)(l.Z,{children:(0,m.jsx)(x.Z,{})})]})]})})},Z=t(4165),v=t(5861),b=t(885),w=t(5017),k=t(5814),y=t(5590),C=t(8254),I=t(277),F=t(6526),_=t(6206),z=t(2413),R=t(5432),S=t(9134),O=t(5355),P=t(9585),A=t(4306),W=t(2789),B=t(159),H=t(5623),M=(t(7612),(0,I.ZP)(w.Z)((function(e){e.theme;return{"& .MuiInputBase-input":{paddingTop:"12px",paddingBottom:"12px"}}}))),E=[{color:"#4da5fe",icon:(0,m.jsx)(F.Z,{size:24}),y:102,title:"Photo/Video"},{color:"#1b8cfe",icon:(0,m.jsx)(_.Z,{size:24}),y:172,title:"Stickers"},{color:"#0172e4",icon:(0,m.jsx)(z.Z,{size:24}),y:242,title:"Image"},{color:"#0159b2",icon:(0,m.jsx)(R.Z,{size:24}),y:312,title:"Document"},{color:"#013f7f",icon:(0,m.jsx)(S.Z,{size:24}),y:382,title:"Contact"}],T=function(e){var n=e.setOpenPicker,t=e.inputField,i=e.setInputField,s=(0,o.useState)(!1),a=(0,b.Z)(s,2),c=a[0],u=a[1];return(0,m.jsx)(M,{value:t,onChange:function(e){i(e.target.value)},fullWidth:!0,placeholder:"Write a message...",variant:"filled",InputProps:{disableUnderline:!0,startAdornment:(0,m.jsxs)(r.Z,{sx:{width:"max-content"},children:[(0,m.jsx)(r.Z,{sx:{position:"relative",display:c?"inline-block":"none"},children:E.map((function(e,n){return(0,m.jsx)(k.Z,{placement:"right",title:e.title,children:(0,m.jsx)(y.Z,{sx:{position:"absolute",top:-e.y,backgroundColor:e.color},children:e.icon})},n)}))}),(0,m.jsx)(C.Z,{position:"start",children:(0,m.jsx)(l.Z,{onClick:function(){return u((function(e){return!e}))},children:(0,m.jsx)(O.Z,{})})})]}),endAdornment:(0,m.jsx)(C.Z,{position:"start",children:(0,m.jsx)(l.Z,{onClick:function(){return n((function(e){return!e}))},children:(0,m.jsx)(P.Z,{})})})}})},V=function(){var e=(0,s.Z)(),n=(0,o.useState)(!1),t=(0,b.Z)(n,2),a=(t[0],t[1]),c=(0,g.v9)((function(e){return e.auth})).token,u=(0,g.v9)((function(e){return e.messages})).messages,d=(0,o.useState)(""),x=(0,b.Z)(d,2),p=x[0],h=x[1],f=function(){var e=(0,v.Z)((0,Z.Z)().mark((function e(){var n;return(0,Z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.trim()){e.next=5;break}return e.next=3,(0,W.I)("/chat/send",c,{conversation_id:u.conversation_element.id,message:p},"POST");case 3:(n=e.sent).success&&(h(""),n.data.type="text",(0,H.WI)((0,B.Hz)(n.data)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.jsx)(i.Z,{p:2,sx:{width:"100%",backgroundColor:"light"===e.palette.mode?"#F8FAFF":e.palette.background.paper,boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:(0,m.jsxs)(r.Z,{direction:"row",alignItems:"center",spacing:3,children:[(0,m.jsx)(r.Z,{sx:{width:"100%"},children:(0,m.jsx)(T,{setOpenPicker:a,inputField:p,setInputField:h})}),(0,m.jsx)(i.Z,{onClick:f,sx:{height:48,width:48,backgroundColor:e.palette.primary.main,borderRadius:1.5},children:(0,m.jsx)(r.Z,{sx:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,m.jsx)(l.Z,{children:(0,m.jsx)(A.Z,{color:"#fff"})})})})]})})},G=t(2386),L=function(){(0,s.Z)();return(0,m.jsxs)(r.Z,{height:"100%",maxHeight:"100vh",width:"auto",children:[(0,m.jsx)(j,{}),(0,m.jsx)(i.Z,{className:"scrollbar",width:"100%",sx:{flexGrow:1,height:"100%",overflowY:"scroll"},children:(0,m.jsx)(G.Z,{menu:!0})}),(0,m.jsx)(V,{})]})}},5670:function(e,n,t){var r=t(225),i=t(294),o=(0,r.Z)(i.Z)((function(e){var n=e.theme;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(n.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}));n.Z=o}}]);
//# sourceMappingURL=306.a4a19be5.chunk.js.map