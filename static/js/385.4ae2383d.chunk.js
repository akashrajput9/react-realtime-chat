"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[385],{2460:function(e,n,t){var r=t(3423),i=t(6015),o=t(4162),s=t(4565),a=t(3811),c=t(1872),l=t(703),u=t(9865),d=(t(2791),t(4142)),p=t(155),x=t(5670),h=t(6026),f=t(4420),g=(t(1317),t(184));n.Z=function(){var e,n,t=(0,f.I0)(),Z=(0,d.Z)(),m=(0,f.v9)((function(e){return e.messages})).messages,j=null===m||void 0===m?void 0:m.conversation_element;if(function(e){return 0===Object.keys(e).length&&e.constructor===Object}(j))return console.log(j,"ceee"),(0,g.jsx)(g.Fragment,{});var v=function(e){return(0,g.jsx)(r.Z,{alt:e.name,src:p.We.image.avatar()})};return(0,g.jsx)(i.Z,{p:2,sx:{width:"100%",backgroundColor:"light"===Z.palette.mode?"#F8FAFF":Z.palette.background.paper,boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:(0,g.jsxs)(o.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",sx:{width:"100%",height:"100%"},children:[(0,g.jsxs)(o.Z,{onClick:function(){t((0,h.Xk)())},direction:"row",spacing:2,children:[(0,g.jsx)(i.Z,{children:j.is_online?(0,g.jsx)(x.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,g.jsx)(v,{ce:j})}):(0,g.jsx)(v,{ce:j})}),(0,g.jsxs)(o.Z,{spacing:.2,children:[(0,g.jsx)(s.Z,{variant:"subtitle2",children:j.is_group?j.name:(null===j||void 0===j||null===(e=j.users)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.name)||""}),(0,g.jsx)(s.Z,{variant:"caption",children:j.is_online?"Online":"Offline"})]})]}),(0,g.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:3,children:[(0,g.jsx)(a.Z,{children:(0,g.jsx)(l.Z,{})}),(0,g.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,g.jsx)(a.Z,{children:(0,g.jsx)(u.Z,{})})]})]})})}},2386:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(2982),i=t(6015),o=t(4162),s=t(2791),a=t(4420),c=t(4741),l=(0,t(7612).io)("http://localhost:3002",{autoConnect:!0}),u=t(5623),d=t(159),p=t(184),x=function(e){var n=e.menu,t=(0,a.v9)((function(e){return e.messages})).messages,x=(0,a.v9)((function(e){return e.auth})).user;(0,s.useEffect)((function(){return l.on("receive_message",(function(e){console.log("Message received from server:",e.data.conversation_id,t.conversation_element.id,e.data.user_id,x.id),e.data.conversation_id===t.conversation_element.id&&e.data.user_id!=x.id&&(0,u.WI)((0,d.Hz)(e.data))})),function(){l.off("receive_message")}}),[]);var h=(0,s.useRef)(null);return(0,s.useEffect)((function(){h.current&&h.current.scrollIntoView({behavior:"smooth"})}),[t]),(0,p.jsxs)(i.Z,{p:3,children:[(0,p.jsx)(o.Z,{spacing:3,children:(0,r.Z)(null===t||void 0===t?void 0:t.data).reverse().map((function(e,t){return"text"===e.type?(0,p.jsx)(c.w8,{el:e,menu:n},t):(0,p.jsx)(p.Fragment,{})}))}),(0,p.jsx)("div",{ref:h})]})}},4741:function(e,n,t){t.d(n,{RL:function(){return j},V5:function(){return v},w8:function(){return b}});var r=t(885),i=t(4162),o=t(6015),s=t(4565),a=t(3811),c=t(6283),l=t(5452),u=t(4020),d=t(4142),p=t(6526),x=t(7501),h=t(7863),f=t(2791),g=t(9887),Z=t(4420),m=t(184),j=function(e){var n=e.el,t=e.menu,r=(0,d.Z)();return(0,m.jsxs)(i.Z,{direction:"row",justifyContent:n.incoming?"start":"end",children:[(0,m.jsx)(o.Z,{p:1.5,sx:{backgroundColor:n.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,m.jsxs)(i.Z,{spacing:2,children:[(0,m.jsxs)(i.Z,{p:2,spacing:3,direction:"row",alignItems:"center",sx:{backgroundColor:r.palette.background.paper,borderRadius:1},children:[(0,m.jsx)(p.Z,{size:48}),(0,m.jsx)(s.Z,{variant:"caption",children:"Abstract.png"}),(0,m.jsx)(a.Z,{children:(0,m.jsx)(x.Z,{})})]}),(0,m.jsx)(s.Z,{variant:"body2",sx:{color:n.incoming?r.palette.text:"#fff"},children:n.message})]})}),t&&(0,m.jsx)(w,{})]})},v=function(e){var n=e.el,t=e.menu,r=(0,d.Z)();return(0,m.jsxs)(i.Z,{direction:"row",justifyContent:n.incoming?"start":"end",children:[(0,m.jsx)(o.Z,{p:1.5,sx:{backgroundColor:n.incoming?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,m.jsx)(i.Z,{spacing:2,children:(0,m.jsxs)(i.Z,{p:2,spacing:3,alignItems:"start",sx:{backgroundColor:r.palette.background.paper,borderRadius:1},children:[(0,m.jsx)("img",{src:n.preview,alt:n.message,style:{maxHeight:210,borderRadius:"10px"}}),(0,m.jsxs)(i.Z,{spacing:2,children:[(0,m.jsx)(s.Z,{variant:"subtitle2",children:"Creating Chat App"}),(0,m.jsx)(s.Z,{variant:"subtitle2",sx:{color:r.palette.primary.main},component:c.Z,to:"//https://www.youtube.com",children:"www.youtube.com"})]}),(0,m.jsx)(s.Z,{variant:"body2",color:n.incoming?r.palette.text:"#fff",children:n.message})]})})}),t&&(0,m.jsx)(w,{})]})},b=function(e){var n=e.el,t=e.menu,r=(0,d.Z)(),a=(0,Z.v9)((function(e){return e.auth})).user.id!==n.user_id;return(0,m.jsxs)(i.Z,{direction:"row",justifyContent:a?"start":"end",children:[(0,m.jsx)(o.Z,{p:1.5,sx:{backgroundColor:a?r.palette.background.default:r.palette.primary.main,borderRadius:1.5,width:"max-content"},children:(0,m.jsx)(s.Z,{variant:"body2",color:a?r.palette.text:"#fff",children:n.content})}),t&&(0,m.jsx)(w,{})]})},w=function(){var e=f.useState(null),n=(0,r.Z)(e,2),t=n[0],o=n[1],s=Boolean(t),a=function(e){o(e.currentTarget)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(h.Z,{id:"basic-button","aria-controls":s?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":s?"true":void 0,onClick:a,size:20}),(0,m.jsx)(l.Z,{id:"basic-menu",anchorEl:t,open:s,onClose:function(){o(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:(0,m.jsx)(i.Z,{spacing:1,px:1,children:g.GF.map((function(e,n){return(0,m.jsx)(u.Z,{onClick:a,children:e.title},n)}))})})]})}},1385:function(e,n,t){t.d(n,{Z:function(){return A}});var r=t(4162),i=t(6015),o=t(2791),s=t(4142),a=t(2460),c=t(4165),l=t(5861),u=t(885),d=t(5533),p=t(5814),x=t(5590),h=t(8254),f=t(3811),g=t(277),Z=t(6526),m=t(6206),j=t(2413),v=t(5432),b=t(9134),w=t(5355),k=t(9585),y=t(4420),C=t(4306),I=t(2789),F=t(159),_=t(5623),S=(t(7612),t(184)),z=(0,g.ZP)(d.Z)((function(e){e.theme;return{"& .MuiInputBase-input":{paddingTop:"12px",paddingBottom:"12px"}}})),O=[{color:"#4da5fe",icon:(0,S.jsx)(Z.Z,{size:24}),y:102,title:"Photo/Video"},{color:"#1b8cfe",icon:(0,S.jsx)(m.Z,{size:24}),y:172,title:"Stickers"},{color:"#0172e4",icon:(0,S.jsx)(j.Z,{size:24}),y:242,title:"Image"},{color:"#0159b2",icon:(0,S.jsx)(v.Z,{size:24}),y:312,title:"Document"},{color:"#013f7f",icon:(0,S.jsx)(b.Z,{size:24}),y:382,title:"Contact"}],R=function(e){var n=e.setOpenPicker,t=e.inputField,i=e.setInputField,s=(0,o.useState)(!1),a=(0,u.Z)(s,2),c=a[0],l=a[1];return(0,S.jsx)(z,{value:t,onChange:function(e){i(e.target.value)},fullWidth:!0,placeholder:"Write a message...",variant:"filled",InputProps:{disableUnderline:!0,startAdornment:(0,S.jsxs)(r.Z,{sx:{width:"max-content"},children:[(0,S.jsx)(r.Z,{sx:{position:"relative",display:c?"inline-block":"none"},children:O.map((function(e,n){return(0,S.jsx)(p.Z,{placement:"right",title:e.title,children:(0,S.jsx)(x.Z,{sx:{position:"absolute",top:-e.y,backgroundColor:e.color},children:e.icon})},n)}))}),(0,S.jsx)(h.Z,{position:"start",children:(0,S.jsx)(f.Z,{onClick:function(){return l((function(e){return!e}))},children:(0,S.jsx)(w.Z,{})})})]}),endAdornment:(0,S.jsx)(h.Z,{position:"start",children:(0,S.jsx)(f.Z,{onClick:function(){return n((function(e){return!e}))},children:(0,S.jsx)(k.Z,{})})})}})},E=function(){var e=(0,s.Z)(),n=(0,o.useState)(!1),t=(0,u.Z)(n,2),a=(t[0],t[1]),d=(0,y.v9)((function(e){return e.auth})).token,p=(0,y.v9)((function(e){return e.messages})).messages,x=(0,o.useState)(""),h=(0,u.Z)(x,2),g=h[0],Z=h[1],m=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.trim()){e.next=5;break}return e.next=3,(0,I.I)("/chat/send",d,{conversation_id:p.conversation_element.id,message:g},"POST");case 3:(n=e.sent).success&&(Z(""),n.data.type="text",(0,_.WI)((0,F.Hz)(n.data)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.jsx)(i.Z,{p:2,sx:{width:"100%",backgroundColor:"light"===e.palette.mode?"#F8FAFF":e.palette.background.paper,boxShadow:"0px 0px 2px rgba(0,0,0,0.25)"},children:(0,S.jsxs)(r.Z,{direction:"row",alignItems:"center",spacing:3,children:[(0,S.jsx)(r.Z,{sx:{width:"100%"},children:(0,S.jsx)(R,{setOpenPicker:a,inputField:g,setInputField:Z})}),(0,S.jsx)(i.Z,{onClick:m,sx:{height:48,width:48,backgroundColor:e.palette.primary.main,borderRadius:1.5},children:(0,S.jsx)(r.Z,{sx:{height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(f.Z,{children:(0,S.jsx)(C.Z,{color:"#fff"})})})})]})})},P=t(2386),A=function(){(0,s.Z)();return(0,S.jsxs)(r.Z,{height:"100%",maxHeight:"100vh",width:"auto",children:[(0,S.jsx)(a.Z,{}),(0,S.jsx)(i.Z,{className:"scrollbar",width:"100%",sx:{flexGrow:1,height:"100%",overflowY:"scroll"},children:(0,S.jsx)(P.Z,{menu:!0})}),(0,S.jsx)(E,{})]})}},5670:function(e,n,t){var r=t(225),i=t(294),o=(0,r.Z)(i.Z)((function(e){var n=e.theme;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(n.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}));n.Z=o},2789:function(e,n,t){t.d(n,{I:function(){return a}});var r=t(4165),i=t(1413),o=t(5861),s=t(8770);function a(e){return c.apply(this,arguments)}function c(){return c=(0,o.Z)((0,r.Z)().mark((function e(n){var t,o,a,c,l,u,d,p,x,h,f,g,Z=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Z.length>1&&void 0!==Z[1]?Z[1]:null,o=Z.length>2&&void 0!==Z[2]?Z[2]:{},a=Z.length>3&&void 0!==Z[3]?Z[3]:"GET",c=Z.length>4&&void 0!==Z[4]?Z[4]:{},console.log("api data payload ",o),e.prev=5,a=a.toUpperCase(),l=s.t3+n,"GET"===a&&Object.keys(o).length>0&&(u=new URLSearchParams(o).toString(),l+="?".concat(u)),d={method:a,headers:(0,i.Z)((0,i.Z)({"Content-Type":"application/json"},t?{Authorization:"Bearer ".concat(t)}:{}),c)},"GET"!==a&&(d.body=JSON.stringify(o)),e.next=13,fetch(l,d);case 13:if((p=e.sent).ok){e.next=28;break}return h="API Error: ".concat(p.status," ").concat(p.statusText),f={},e.prev=17,e.next=20,p.json();case 20:f=e.sent,h=f.message||h,e.next=27;break;case 24:e.prev=24,e.t0=e.catch(17),console.error("Error parsing error response JSON:",e.t0);case 27:return e.abrupt("return",(0,i.Z)({status:p.status,message:h,response:f,success:null===(x=f)||void 0===x?void 0:x.success},"API Error"===h?{}:{errorDetails:h}));case 28:return e.next=30,p.json();case 30:return g=e.sent,e.abrupt("return",g);case 34:return e.prev=34,e.t1=e.catch(5),e.abrupt("return",{status:0,message:"Internal Error: ".concat(e.t1.message)});case 37:case"end":return e.stop()}}),e,null,[[5,34],[17,24]])}))),c.apply(this,arguments)}}}]);
//# sourceMappingURL=385.4ae2383d.chunk.js.map